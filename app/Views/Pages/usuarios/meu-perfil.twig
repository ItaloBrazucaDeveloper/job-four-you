{% extends "Layouts/main.layout.twig" %}

{% import "Macros/button.twig" as button %}

{% block title %}Meu Perfil | Job4You{% endblock %}

{% block main %}
	<main class="flex-grow">
		<div class="max-w-4xl mx-auto px-6 py-8">
			<div class="bg-white/80 rounded-lg shadow-md overflow-hidden border border-gray-200">
				{% include "Partials/usuarios/perfil/_header.twig" %}
				{% include "Partials/usuarios/perfil/_nav.twig" %}

				{% if usuario is defined %}
					<section id="perfil" class="p-6 md:p-8">
						<h2 class="text-xl font-bold text-gray-800 mb-6">
							Informações Pessoais
						</h2>

						{% set formAction = usuario.tipo == 'PRESTADOR' ? '/prestadores/atualizar' : '/usuarios/atualizar' %}

						<form action="{{ formAction }}" method="POST" class="space-y-6">
							<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
								{% include "Partials/usuarios/perfil/_atualizar-dados.twig" %}
							</div>

							<div class="pt-4">
								{{ button.render(type: 'submit', text: 'Salvar Alterações') }}
							</div>
						</form>
					</section>
				{% endif %}

				{% if favoritos is defined %}
					{% include "Partials/usuarios/perfil/_favoritos.twig" %}
				{% endif %}

				{% if servicos is defined %}
					{% include "Partials/usuarios/perfil/_servico.twig" %}
				{% endif %}
			</div>
		</div>
	</main>
{% endblock %}

{% block scripts %}
	<script type="module" src="/assets/js/meu-perfil/index.js"></script>
{% endblock scripts %}